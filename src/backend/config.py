# ============================================================
# config.py â€” Money Hunter í™˜ê²½ ë³€ìˆ˜ ê´€ë¦¬
# Maintainer: Young-cheol (Backend Engineer)
# ============================================================
# pydantic-settingsë¥¼ ì‚¬ìš©í•˜ì—¬ .env íŒŒì¼ê³¼ í™˜ê²½ ë³€ìˆ˜ë¥¼ í†µí•© ê´€ë¦¬í•©ë‹ˆë‹¤.
# ì„œë²„ ê¸°ë™ ì‹œ ìë™ìœ¼ë¡œ ê°’ì„ ë¡œë“œí•˜ë©°, ëˆ„ë½ ì‹œ ê¸°ë³¸ê°’ ë˜ëŠ” ì—ëŸ¬ë¥¼ ë°œìƒì‹œí‚µë‹ˆë‹¤.
# ============================================================

from functools import cached_property

from pydantic_settings import BaseSettings, SettingsConfigDict


class Settings(BaseSettings):
    """
    Money Hunter ë°±ì—”ë“œ ì„¤ì •.

    í™˜ê²½ ë³€ìˆ˜ ë˜ëŠ” .env íŒŒì¼ì—ì„œ ê°’ì„ ì½ì–´ì˜µë‹ˆë‹¤.
    ë³€ìˆ˜ëª…ì€ ëŒ€ì†Œë¬¸ìë¥¼ êµ¬ë¶„í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. (ì˜ˆ: telegram_token = TELEGRAM_TOKEN)
    """

    # â”€â”€ í”„ë¡œì íŠ¸ ë©”íƒ€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    PROJECT_NAME: str = "Money Hunter"
    VERSION: str = "0.1.0"
    DEBUG: bool = False

    # â”€â”€ Telegram Bot â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    TELEGRAM_TOKEN: str = ""
    CHANNEL_ID_BOTTLE: str = ""   # Catch Bottle ì•Œë¦¼ ì±„ë„
    CHANNEL_ID_DEAL: str = ""     # Catch Deal ì•Œë¦¼ ì±„ë„

    # â”€â”€ ì„œë²„ ì„¤ì • â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    HOST: str = "0.0.0.0"
    PORT: int = 8000

    # â”€â”€ Database (PostgreSQL) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    DB_HOST: str = "5.78.131.126"
    DB_PORT: int = 5432
    DB_USER: str = "boss"
    DB_NAME: str = "moneyhunter"
    DB_PASSWORD: str          # âš ï¸ ê¸°ë³¸ê°’ ì—†ìŒ â€” .env ë˜ëŠ” í™˜ê²½ ë³€ìˆ˜ í•„ìˆ˜!

    # â”€â”€ ìŠ¤ë§ˆíŠ¸ í•„í„° (í•«ë”œ í‚¤ì›Œë“œ) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    # --- 1. ì°¨ë‹¨ í‚¤ì›Œë“œ (Negative Filter) ---
    # ê´‘ê³ , ì¢…ë£Œëœ ë”œ, ì˜ë¯¸ ì—†ëŠ” ì •ë³´ í•„í„°ë§
    BAN_KEYWORDS: list = [
        "ì¢…ë£Œ", "ë§ˆê°", "í’ˆì ˆ", "ë§¤ì§„",
        "ì‚°ì•…íšŒ", "ëŒ€ì¶œ", "ë³´í—˜", "ë Œíƒˆ", "ì œíœ´ì¹´ë“œ",
        "ì„œí¬í„°ì¦ˆ", "ê¸°ìë‹¨",
    ]

    # --- 2. ëŒ€ë°• ì§•í›„ í‚¤ì›Œë“œ (Jackpot Filter) ---
    # ì œëª©ì— ì´ ë‹¨ì–´ê°€ ë“¤ì–´ê°€ë©´ ë¬´ì¡°ê±´ [ğŸ”¥ëŒ€ë°•] ì´ëª¨ì§€ ë¶€ì°©
    JACKPOT_KEYWORDS: list = [
        "ì—­ëŒ€ê°€", "ê°€ê²©ì˜¤ë¥˜", "ì˜¤ë¥˜", "ëŒ€ë€", "ê¸´ê¸‰",
        "90%", "80%", "70%", "0ì›", "ë¬´ë£Œ", "ì„ ì°©ìˆœ",
    ]

    # --- 3. ê´€ì‹¬ í‚¤ì›Œë“œ (Watch Filter) ---
    # ì¹´í…Œê³ ë¦¬ë³„ë¡œ ê´€ë¦¬í•˜ì—¬ ìœ ì§€ë³´ìˆ˜ì„±ì„ ë†’ì„

    # [Tech/ì „ìê¸°ê¸°] - 2026ë…„í˜• ìµœì‹  ê¸°ê¸° ë° ê³ ê°€ ë¶€í’ˆ
    _TECH: list = ["RTX", "5080", "5090", "M5", "ì•„ì´íŒ¨ë“œ", "ê°¤ëŸ­ì‹œ", "S26", "ìš¸íŠ¸ë¼", "ìŠ¤íŒ€ë±"]

    # [ê¸ˆìœµ/ìƒí’ˆê¶Œ] - í™˜ê¸ˆì„± ë†’ì€ ìƒí…Œí¬ í•­ëª©
    _MONEY: list = ["ìƒí’ˆê¶Œ", "í•´í”¼ë¨¸ë‹ˆ", "ì»¬ì³", "ê¹Šì¹´", "ë„¤í˜", "í¬ì¸íŠ¸"]

    # [ì—¬í–‰/ë¼ì´í”„] - ì‹œì¦Œì„± ì¸ê¸° í•­ëª©
    _LIFE: list = ["í•­ê³µê¶Œ", "ì˜¤ì‚¬ì¹´", "ë„ì¿„", "ë¹„ì¦ˆë‹ˆìŠ¤", "í˜¸í…”", "ë‹¤ì´ìŠ¨"]

    # [ì£¼ë¥˜/ëŸ­ì…”ë¦¬] - í¬ì†Œì„± ìˆëŠ” ì•„ì´í…œ
    _LUXURY: list = ["ìœ„ìŠ¤í‚¤", "ë°œë² ë‹ˆ", "íˆë¹„í‚¤", "ì•¼ë§ˆìí‚¤", "ë§¥ìº˜ë€", "ë¡œë ‰ìŠ¤", "ìƒ¤ë„¬"]

    # ìµœì¢… ë³‘í•© (ì´ ë¦¬ìŠ¤íŠ¸ê°€ ì‹¤ì œ í•„í„°ë§ì— ì‚¬ìš©ë¨)
    WATCH_KEYWORDS: list = _TECH + _MONEY + _LIFE + _LUXURY

    @property
    def DATABASE_URL(self) -> str:
        """ë¹„ë™ê¸° PostgreSQL ì ‘ì† URLì„ ë™ì ìœ¼ë¡œ ìƒì„±í•©ë‹ˆë‹¤."""
        return (
            f"postgresql+asyncpg://{self.DB_USER}:{self.DB_PASSWORD}"
            f"@{self.DB_HOST}:{self.DB_PORT}/{self.DB_NAME}"
        )

    @property
    def SYNC_DATABASE_URL(self) -> str:
        """ë™ê¸° PostgreSQL ì ‘ì† URL (í¬ë¡¤ëŸ¬ ë“± ë™ê¸° ìŠ¤í¬ë¦½íŠ¸ìš©)."""
        return (
            f"postgresql+psycopg2://{self.DB_USER}:{self.DB_PASSWORD}"
            f"@{self.DB_HOST}:{self.DB_PORT}/{self.DB_NAME}"
        )

    # â”€â”€ .env íŒŒì¼ ë¡œë“œ ì„¤ì • â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    model_config = SettingsConfigDict(
        env_file=".env",
        env_file_encoding="utf-8",
        case_sensitive=False,
        extra="ignore",           # .envì— ì •ì˜ë˜ì§€ ì•Šì€ ë³€ìˆ˜ê°€ ìˆì–´ë„ ë¬´ì‹œ
    )


# ì‹±ê¸€í„´ ì¸ìŠ¤í„´ìŠ¤ â€” ë‹¤ë¥¸ ëª¨ë“ˆì—ì„œ `from config import settings`ë¡œ ì‚¬ìš©
settings = Settings()
